<div class="container">
  <h1>Next.js Middleware</h1>
  <p>Middleware allows you to run code before a request is completed, enabling authentication, redirects, rewrites, and custom logic.</p>

  <mat-tab-group>
    <mat-tab label="Basics">
      <div class="tab-content">
        <h2>Middleware Basics</h2>
        <div class="info-box">
          <p><strong>Middleware</strong> runs before requests are completed, perfect for authentication and routing logic.</p>
          <ul>
            <li>Runs on Edge Runtime (fast and global)</li>
            <li>Define in middleware.ts at root</li>
            <li>Configure with matcher patterns</li>
            <li>Access request and modify response</li>
            <li>Lightweight execution environment</li>
            <li>Can't use Node.js APIs</li>
          </ul>
        </div>
        <pre><code class="language-tsx">{{middlewareBasics}}</code></pre>
      </div>
    </mat-tab>

    <mat-tab label="Authentication">
      <div class="tab-content">
        <h2>Authentication</h2>
        <div class="info-box">
          <p>Protect routes and implement authentication logic with middleware.</p>
          <ul>
            <li>Check authentication tokens</li>
            <li>Redirect unauthenticated users</li>
            <li>Protect specific routes</li>
            <li>Verify JWT tokens</li>
            <li>Pass user info to pages</li>
            <li>Handle login redirects</li>
          </ul>
        </div>
        <pre><code class="language-tsx">{{authentication}}</code></pre>
      </div>
    </mat-tab>

    <mat-tab label="Redirects">
      <div class="tab-content">
        <h2>Redirects</h2>
        <div class="info-box">
          <p>Implement redirects based on various conditions.</p>
          <ul>
            <li>Simple URL redirects</li>
            <li>Conditional redirects</li>
            <li>Locale-based redirects</li>
            <li>Permanent redirects (308)</li>
            <li>Query parameter based</li>
            <li>Geolocation redirects</li>
          </ul>
        </div>
        <pre><code class="language-tsx">{{redirects}}</code></pre>
      </div>
    </mat-tab>

    <mat-tab label="Rewriting">
      <div class="tab-content">
        <h2>URL Rewriting</h2>
        <div class="info-box">
          <p>Rewrite URLs to serve different content while keeping the URL the same.</p>
          <ul>
            <li>URL stays same, content changes</li>
            <li>A/B testing</li>
            <li>Multi-tenant applications</li>
            <li>Feature flags</li>
            <li>Subdomain routing</li>
            <li>Transparent proxying</li>
          </ul>
        </div>
        <pre><code class="language-tsx">{{rewriting}}</code></pre>
      </div>
    </mat-tab>

    <mat-tab label="Headers">
      <div class="tab-content">
        <h2>Custom Headers</h2>
        <div class="info-box">
          <p>Set custom headers for security, CORS, caching, and more.</p>
          <ul>
            <li>Security headers (X-Frame-Options, etc.)</li>
            <li>CORS configuration</li>
            <li>Cache-Control headers</li>
            <li>Custom headers</li>
            <li>Request ID tracking</li>
            <li>Handle OPTIONS preflight</li>
          </ul>
        </div>
        <pre><code class="language-tsx">{{headers}}</code></pre>
      </div>
    </mat-tab>

    <mat-tab label="Cookies">
      <div class="tab-content">
        <h2>Cookie Management</h2>
        <div class="info-box">
          <p>Read and set cookies in middleware for session management and preferences.</p>
          <ul>
            <li>Read request cookies</li>
            <li>Set response cookies</li>
            <li>Cookie options (httpOnly, secure, etc.)</li>
            <li>Delete cookies</li>
            <li>Cookie-based feature flags</li>
            <li>Session management</li>
          </ul>
        </div>
        <pre><code class="language-tsx">{{cookies}}</code></pre>
      </div>
    </mat-tab>

    <mat-tab label="Rate Limiting">
      <div class="tab-content">
        <h2>Rate Limiting</h2>
        <div class="info-box">
          <p>Implement rate limiting to prevent abuse and protect your API.</p>
          <ul>
            <li>IP-based rate limiting</li>
            <li>Sliding window algorithm</li>
            <li>Custom rate limit headers</li>
            <li>429 Too Many Requests response</li>
            <li>Use Redis for production</li>
            <li>Per-route rate limits</li>
          </ul>
        </div>
        <pre><code class="language-tsx">{{rateLimiting}}</code></pre>
      </div>
    </mat-tab>

    <mat-tab label="Geolocation">
      <div class="tab-content">
        <h2>Geolocation & Device Detection</h2>
        <div class="info-box">
          <p>Use geolocation and device information for personalized experiences.</p>
          <ul>
            <li>Country and city detection</li>
            <li>Latitude and longitude</li>
            <li>User agent parsing</li>
            <li>Mobile vs desktop detection</li>
            <li>Bot detection</li>
            <li>Country-specific content</li>
          </ul>
        </div>
        <pre><code class="language-tsx">{{geolocation}}</code></pre>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
